
# 模块:接口详情
## 子模块：更多按钮模块、JSON展示模块

### 功能概括
1. 展示接口状态、协议、请求方式、名称。
2. 展示接口请求参数列表，是否必填、参数名(包括参数说明)、参数类型、值、值说明。
3. 展示接口应返回的JSON信息，分为成功结果和失败结果，可格式化JSON展示的格式。
4. 展示接口应返回的JSON对象列表，是否必含、参数名(包括参数说明)、值、值说明。
5. 展示接口的其他备注信息。

### 业务流程
1. 通过id查找到接口的全部信息。
2. 通过接口信息为state下的字段赋值。

### 实现细节
1. 查找到接口的全部信息对象后，用复制对象的的方式接收对象，防止操作对象时改变实体数据。
2. 为所有需要循环渲染的对象添加key值。
	1. React视图更新，基本原理是用纯js对象模拟dom树，每当更新时，根据组件们的render方法计算出新的虚拟dom树，并与此前的虚拟dom树作对比，得到一个差异补丁，最后映射到真实dom树上完成视图更新。
	2. .![](https://i.imgur.com/Cia6kaU.png)
	3. React在对比两棵树时，发现原来的两个li元素都与新v-dom中对应位置上的两个li元素不同，就会对其修改，并向真实dom树中插入新的second节点。实际上，我们可能只是进行了在first之前插入新zero节点的操作，而现在进行了额外的修改操作。
	4. React在对比两棵树时，只要子元素有key属性，便会去原v-dom树中相应位置寻找是否有同key元素，比较它们是否完全相同，若是则复用该元素，免去不必要的操作。 
	5. 禁令避免用索引来充当key值，最好接口提供唯一id，因为会发生添加多条参数，删除第二条数据的时候，第三条数据消失。
3. 因为参数有可能是对象类型，所以展示参数列表时，为了突出他们的嵌套关系，在参数名一栏中对他们展示位置添加了一个text-index属性， 在render中调用cloneArr方法，尽可能避免递归的出现。



# 模块:接口测试
## 子模块：更多按钮模块、环境模块、请求头模块、请求参数模块、JSON展示模块、断言弹出框高阶组件

### 功能概括
1. 展示已编辑的请求地址，通过环境选择，更改请求地址域名，通过请求方式选择，更改请求方式。
2. 通过编辑请求头组件，更改请求时的请求头内容。
3. 展示已编辑的请求参数，通过编辑请求参数，更改请求时的请求参数内容。
4. 展示接口请求后返回的JSON信息，可格式化JSON展示的格式。
5. 接口请求成功且历史记录中没有此次记录时，添加到请求历史记录。
6. 请求历史记录有批处理选项和断言弹出框。

### 业务流程
1. 通过id查找到接口的全部信息。
2. 通过接口信息为state下的字段赋值。
3. 点击发送请求按钮，获取此时的请求地址、协议、请求方式、请求头和请求参数，并发送请求。
4. 当请求成功且历史记录中没有此次记录时，把此次请求的所有数据添加到请求历史记录中。
5. 点击添加到批处理后，弹出断言弹出框，当断言按要求填写后，此次历史记录会添加到批测试里。

### 实现细节
1. fetchUpdateAddInterface异步函数执行流程。
	1. 通过createAction创建一个函数，返回值是action。
	2. 通过createAsynAction创建一个请求接口的函数fetchUpdateAddInterface，内部通过接口返回的数据更新store。
	3. 通过bindActionCreators将创建的fetchUpdateAddInterface通过peops传入到容器中。
2. 高阶组件，高阶组件其实就是一个方法，返回值还是一个方法，这个方法只接收一个参数，那就是需要被包裹的组件，最后返回这个重新包裹后的组件。
	1. this指向，高阶组件里的方法可通过props传入到子组件中，在子组件里调用需要this.props，这时方法体内的this指向子组件，而在高阶组件里调用这个方法的时候，这时方法体内的this指向高阶组件。
3. 接口数据持久化，每个接口根据didInvalidata字段判断数据是否失效 刷新浏览器数据失效并且重新赋值，IsFetching字段表示正在拿数据。